import type { Request } from 'express';
import { PrismaService } from '../prisma/prisma.service';
import { CreateReceiptDto } from './dto/create-receipt.dto';
import { SetReceiptAllocationsDto } from './dto/set-receipt-allocations.dto';
import { UpdateReceiptDto } from './dto/update-receipt.dto';
export declare class ArReceiptsService {
    private readonly prisma;
    private readonly RECEIPT_NUMBER_SEQUENCE_NAME;
    private readonly OPENING_PERIOD_NAME;
    constructor(prisma: PrismaService);
    private round2;
    private normalizeMoney;
    private escapeHtml;
    private formatMoney;
    private ensurePdfKit;
    private parseReference;
    private validateAndNormalizeHeader;
    private ensureTenant;
    private ensureUser;
    private assertEditable;
    private nextReceiptNumber;
    private validateLines;
    listAllocations(req: Request, receiptId: string): Promise<{
        receiptId: string;
        lines: any;
    }>;
    setAllocations(req: Request, receiptId: string, dto: SetReceiptAllocationsDto): Promise<{
        receiptId: string;
        lines: any;
    }>;
    listReceipts(req: Request): Promise<any>;
    getReceiptById(req: Request, id: string): Promise<{
        id: any;
        receiptNumber: any;
        receiptDate: any;
        customerId: any;
        customerName: any;
        currency: any;
        exchangeRate: number;
        totalAmount: number;
        paymentMethod: any;
        paymentReference: any;
        reference: any;
        status: any;
        glJournalId: any;
        createdAt: any;
        postedAt: any;
        postedById: any;
        voidedAt: any;
        voidReason: any;
        lines: any;
    }>;
    listCustomerOutstandingInvoices(req: Request, customerId: string, currency?: string): Promise<{
        customerId: string;
        currency: string | null;
        invoices: {
            invoiceId: any;
            invoiceNumber: any;
            invoiceDate: string | null;
            dueDate: string | null;
            currency: any;
            totalAmount: number;
            outstandingAmount: number;
        }[];
    }>;
    exportReceipt(req: Request, id: string, opts: {
        format: 'html' | 'pdf';
    }): Promise<{
        contentType: string;
        fileName: string;
        body: string;
    } | {
        contentType: string;
        fileName: string;
        body: Buffer<ArrayBufferLike>;
    }>;
    createReceipt(req: Request, dto: CreateReceiptDto): Promise<{
        id: any;
        receiptNumber: any;
        receiptDate: any;
        customerId: any;
        customerName: any;
        currency: any;
        exchangeRate: number;
        totalAmount: number;
        paymentMethod: any;
        paymentReference: any;
        reference: any;
        status: any;
        glJournalId: any;
        createdAt: any;
        postedAt: any;
        postedById: any;
        voidedAt: any;
        voidReason: any;
        lines: any;
    }>;
    updateReceipt(req: Request, id: string, dto: UpdateReceiptDto): Promise<{
        id: any;
        receiptNumber: any;
        receiptDate: any;
        customerId: any;
        customerName: any;
        currency: any;
        exchangeRate: number;
        totalAmount: number;
        paymentMethod: any;
        paymentReference: any;
        reference: any;
        status: any;
        glJournalId: any;
        createdAt: any;
        postedAt: any;
        postedById: any;
        voidedAt: any;
        voidReason: any;
        lines: any;
    }>;
    postReceipt(req: Request, id: string): Promise<{
        id: any;
        receiptNumber: any;
        receiptDate: any;
        customerId: any;
        customerName: any;
        currency: any;
        exchangeRate: number;
        totalAmount: number;
        paymentMethod: any;
        paymentReference: any;
        reference: any;
        status: any;
        glJournalId: any;
        createdAt: any;
        postedAt: any;
        postedById: any;
        voidedAt: any;
        voidReason: any;
        lines: any;
    }>;
    voidReceipt(req: Request, id: string, reason: string): Promise<{
        id: any;
        receiptNumber: any;
        receiptDate: any;
        customerId: any;
        customerName: any;
        currency: any;
        exchangeRate: number;
        totalAmount: number;
        paymentMethod: any;
        paymentReference: any;
        reference: any;
        status: any;
        glJournalId: any;
        createdAt: any;
        postedAt: any;
        postedById: any;
        voidedAt: any;
        voidReason: any;
        lines: any;
    }>;
}
